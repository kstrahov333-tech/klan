<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
/* –°—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π */
:root {
  --primary-color: #4285f4;
  --primary-dark: #3367d6;
  --secondary-color: #9aa0a6;
  --background-color: #202124;
  --card-color: #292a2d;
  --border-color: #3c4043;
  --text-color: #e8eaed;
  --text-secondary: #9aa0a6;
  --danger-color: #ea4335;
  --success-color: #34a853;
  --warning-color: #fbbc04;
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: 'Roboto', sans-serif;
  background: var(--background-color);
  color: var(--text-color);
  min-height: 100vh;
  overflow-x: hidden;
}

.admin-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 20px;
}

.admin-header {
  text-align: center;
  margin-bottom: 30px;
  padding: 20px;
  background: var(--card-color);
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.4);
  border-left: 4px solid var(--primary-color);
  position: relative;
}

.admin-header h1 {
  color: var(--primary-color);
  margin: 0;
  font-weight: 500;
  font-size: 24px;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –Ω–æ–≤–æ–π –∫–Ω–æ–ø–∫–∏ */
.custom-button {
  position: absolute;
  top: 20px;
  right: 20px;
  background: var(--success-color);
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 4px;
  cursor: pointer;
  font-family: 'Roboto', sans-serif;
  font-size: 14px;
  font-weight: 500;
  transition: all 0.3s ease;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.custom-button:hover {
  background: #2d8c47;
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}

.custom-button:active {
  transform: translateY(0);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

.custom-button i {
  margin-right: 8px;
}

.admin-section {
  background: var(--card-color);
  border-radius: 8px;
  padding: 20px;
  margin-bottom: 20px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.4);
  border-top: 1px solid var(--border-color);
}

.admin-section h2 {
  color: var(--text-color);
  margin-bottom: 20px;
  font-size: 18px;
  font-weight: 500;
  padding-bottom: 10px;
  border-bottom: 1px solid var(--border-color);
}

.admin-form {
  display: grid;
  grid-template-columns: 1fr 1fr auto;
  gap: 15px;
  margin-bottom: 20px;
  align-items: end;
}

.admin-form input {
  padding: 12px;
  border-radius: 4px;
  border: 1px solid var(--border-color);
  background: var(--background-color);
  color: var(--text-color);
  font-family: 'Roboto', sans-serif;
  font-size: 14px;
  transition: border 0.2s;
}

.admin-form input:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.2);
}

.admin-form button {
  background: var(--primary-color);
  color: white;
  border: none;
  padding: 12px 20px;
  border-radius: 4px;
  cursor: pointer;
  font-family: 'Roboto', sans-serif;
  font-size: 14px;
  font-weight: 500;
  transition: background 0.2s;
}

.admin-form button:hover {
  background: var(--primary-dark);
}

.admin-list {
  max-height: 500px;
  overflow-y: auto;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  padding: 10px;
  background: var(--background-color);
}

.admin-item {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: 15px;
  border-bottom: 1px solid var(--border-color);
  background: var(--card-color);
  margin-bottom: 10px;
  border-radius: 4px;
  transition: background 0.2s;
}

.admin-item:hover {
  background: #323639;
}

.admin-item:last-child {
  border-bottom: none;
  margin-bottom: 0;
}

.admin-item-info {
  flex: 1;
  min-width: 0;
}

.admin-item-actions {
  display: flex;
  gap: 10px;
  flex-shrink: 0;
}

.delete-btn {
  background: var(--danger-color);
  color: white;
  border: none;
  padding: 8px 12px;
  border-radius: 4px;
  cursor: pointer;
  font-family: 'Roboto', sans-serif;
  font-size: 12px;
  transition: background 0.2s;
}

.delete-btn:hover {
  background: #c5221f;
}

.session-info {
  font-size: 12px;
  color: var(--text-secondary);
  margin-top: 5px;
}

.session-details {
  margin-top: 10px;
  padding: 12px;
  background: var(--background-color);
  border-radius: 4px;
  border: 1px solid var(--border-color);
}

.session-section {
  margin-bottom: 10px;
  padding-bottom: 10px;
  border-bottom: 1px solid var(--border-color);
}

.session-section:last-child {
  border-bottom: none;
  margin-bottom: 0;
}

.session-section h4 {
  color: var(--text-color);
  margin-bottom: 8px;
  font-size: 14px;
  font-weight: 500;
}

.session-section div {
  margin-bottom: 4px;
  font-size: 12px;
  color: var(--text-secondary);
  word-break: break-all;
}

.session-badge {
  display: inline-block;
  background: rgba(66, 133, 244, 0.2);
  color: var(--primary-color);
  padding: 3px 6px;
  border-radius: 4px;
  font-size: 11px;
  margin-right: 5px;
  margin-bottom: 3px;
}

.empty-state {
  text-align: center;
  padding: 40px 20px;
  color: var(--text-secondary);
}

.empty-state i {
  font-size: 40px;
  margin-bottom: 15px;
  color: var(--border-color);
}

.filter-bar {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
  flex-wrap: wrap;
}

.filter-btn {
  background: var(--card-color);
  color: var(--text-secondary);
  border: 1px solid var(--border-color);
  padding: 8px 12px;
  border-radius: 4px;
  cursor: pointer;
  font-family: 'Roboto', sans-serif;
  font-size: 12px;
  transition: all 0.2s;
}

.filter-btn.active {
  background: var(--primary-color);
  color: white;
  border-color: var(--primary-color);
}

.filter-btn:hover {
  background: #323639;
}

.filter-btn.active:hover {
  background: var(--primary-dark);
}

.hash-generator {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.hash-input-group {
  display: flex;
  gap: 10px;
}

.hash-input-group input {
  flex: 1;
}

.hash-output {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px;
  background: var(--background-color);
  border-radius: 4px;
  border: 1px solid var(--border-color);
  font-family: monospace;
  font-size: 14px;
}

.hash-output span {
  flex: 1;
  word-break: break-all;
}

.copy-btn {
  background: transparent;
  color: var(--secondary-color);
  border: none;
  cursor: pointer;
  padding: 5px;
  border-radius: 4px;
  transition: all 0.2s;
}

.copy-btn:hover {
  background: rgba(255, 255, 255, 0.1);
  color: var(--text-color);
}

@media (max-width: 768px) {
  .admin-form {
    grid-template-columns: 1fr;
  }
  
  .admin-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }
  
  .admin-item-actions {
    align-self: flex-end;
  }
  
  .hash-input-group {
    flex-direction: column;
  }
  
  /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö */
  .custom-button {
    position: relative;
    top: auto;
    right: auto;
    margin-top: 15px;
    width: 100%;
  }
  
  .admin-header {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
  }
}
</style>
</head>
<body>
<div class="admin-container">
  <div class="admin-header">
    <h1>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>
    <!-- –ù–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ -->
    <a href="https://kstrahov333-tech.github.io/klan/pirog.html" class="custom-button" target="_blank">
      <i class="fas fa-external-link-alt"></i> –ö–Ω–æ–ø–∫–∞
    </a>
  </div>

  <div class="admin-section">
    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏</h2>
    <div class="admin-form">
      <input type="text" id="adminNickname" placeholder="–ù–∏–∫–Ω–µ–π–º ">
      <div class="hash-generator">
        <div class="hash-input-group">
          <input type="text" id="seedInput" placeholder="–ó–µ—Ä–Ω–æ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ID">
          <button id="generateHashBtn">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
        <div class="hash-output">
          <span id="hashOutput">ID –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∑–¥–µ—Å—å</span>
          <button class="copy-btn" id="copyHashBtn">
            <i class="fas fa-copy"></i>
          </button>
        </div>
      </div>
      <button id="addAdminBtn">–î–æ–±–∞–≤–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
    </div>
    <div class="admin-list" id="adminsList"></div>
  </div>

  <div class="admin-section">
    <h2>–°–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
    <div class="filter-bar">
      <button class="filter-btn active" data-filter="all">–í—Å–µ —Å–µ—Å—Å–∏–∏</button>
      <button class="filter-btn" data-filter="today">–°–µ–≥–æ–¥–Ω—è</button>
      <button class="filter-btn" data-filter="week">–ó–∞ –Ω–µ–¥–µ–ª—é</button>
    </div>
    <div class="admin-list" id="sessionsList"></div>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
import { getDatabase, ref, push, onValue, remove, set, get } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyAb1xT6mIHlxcZNt1TBS7jrrDp5re3qMOU",
  authDomain: "klan-d9201.firebaseapp.com",
  databaseURL: "https://klan-d9201-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "klan-d9201",
  storageBucket: "klan-d9201.appspot.com",
  messagingSenderId: "252485302766",
  appId: "1:252485302766:web:7f60cca53e9c9b2d38f6ff"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const adminNickname = document.getElementById('adminNickname');
const seedInput = document.getElementById('seedInput');
const generateHashBtn = document.getElementById('generateHashBtn');
const hashOutput = document.getElementById('hashOutput');
const copyHashBtn = document.getElementById('copyHashBtn');
const addAdminBtn = document.getElementById('addAdminBtn');
const adminsList = document.getElementById('adminsList');
const sessionsList = document.getElementById('sessionsList');
const filterBtns = document.querySelectorAll('.filter-btn');

let currentFilter = 'all';
let sessionsData = [];
let currentHash = '';

// –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ö–µ—à–µ–π - —Ç–µ–ø–µ—Ä—å –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
function generateHash(seed) {
  // –î–æ–±–∞–≤–ª—è–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å–æ–ª—å –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è —ç–Ω—Ç—Ä–æ–ø–∏–∏
  const salt = "x7f9!k2p#m5q&r8t$";
  const data = seed + salt;
  
  let hash = 0;
  for (let i = 0; i < data.length; i++) {
    const char = data.charCodeAt(i);
    hash = ((hash << 7) - hash) + char;
    hash = hash & hash; // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ 32-–±–∏—Ç–Ω–æ–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ
  }
  
  // –°–æ–∑–¥–∞–µ–º –±–æ–ª–µ–µ –¥–ª–∏–Ω–Ω—ã–π —Ö–µ—à –∫–æ–º–±–∏–Ω–∏—Ä—É—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π
  const hex1 = Math.abs(hash).toString(16);
  const hash2 = hash * 16777619;
  const hex2 = Math.abs(hash2).toString(16);
  const hash3 = hash ^ 0xFFFFFFFF;
  const hex3 = Math.abs(hash3).toString(16);
  
  // –ö–æ–º–±–∏–Ω–∏—Ä—É–µ–º –∏ –æ–±—Ä–µ–∑–∞–µ–º –¥–æ 24 —Å–∏–º–≤–æ–ª–æ–≤
  const combined = hex1 + hex2 + hex3;
  return combined.substring(0, 24).toUpperCase();
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ö–µ—à–∞
generateHashBtn.addEventListener('click', () => {
  const seed = seedInput.value.trim();
  if (!seed) {
    alert('–í–≤–µ–¥–∏—Ç–µ –∑–µ—Ä–Ω–æ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ö–µ—à–∞!');
    return;
  }
  
  currentHash = generateHash(seed);
  hashOutput.textContent = currentHash;
});

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ö–µ—à–∞
copyHashBtn.addEventListener('click', () => {
  if (!currentHash) {
    alert('–°–Ω–∞—á–∞–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Ö–µ—à!');
    return;
  }
  
  navigator.clipboard.writeText(currentHash)
    .then(() => {
      // –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
      const originalIcon = copyHashBtn.innerHTML;
      copyHashBtn.innerHTML = '<i class="fas fa-check"></i>';
      setTimeout(() => {
        copyHashBtn.innerHTML = originalIcon;
      }, 2000);
    })
    .catch(err => {
      console.error('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è: ', err);
      alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ö–µ—à');
    });
});

// –ó–∞–≥—Ä—É–∑–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
function loadAdmins() {
  onValue(ref(db, 'admins'), (snapshot) => {
    adminsList.innerHTML = '';
    
    if (!snapshot.exists()) {
      adminsList.innerHTML = `
        <div class="empty-state">
          <i class="fas fa-users"></i>
          <p>–ù–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö </p>
        </div>
      `;
      return;
    }
    
    const admins = [];
    snapshot.forEach(adminSnap => {
      admins.push({ id: adminSnap.key, ...adminSnap.val() });
    });
    
    admins.forEach(admin => {
      const adminItem = document.createElement('div');
      adminItem.className = 'admin-item';
      adminItem.innerHTML = `
        <div class="admin-item-info">
          <div><strong>–ù–∏–∫–Ω–µ–π–º:</strong> ${admin.nickname}</div>
          <div><strong>ID:</strong> ${admin.adminId}</div>
          <div class="session-info">
            –°–æ–∑–¥–∞–Ω: ${new Date(admin.createdAt || Date.now()).toLocaleString()}
          </div>
        </div>
        <div class="admin-item-actions">
          <button class="delete-btn" data-id="${admin.id}">
            <i class="fas fa-trash"></i> –£–¥–∞–ª–∏—Ç—å
          </button>
        </div>
      `;
      
      adminItem.querySelector('.delete-btn').addEventListener('click', (e) => {
        e.stopPropagation();
        if (confirm('–£–¥–∞–ª–∏—Ç—å?')) {
          remove(ref(db, 'admins/' + admin.id));
        }
      });
      
      adminsList.appendChild(adminItem);
    });
  });
}

// –ó–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Å—Å–∏–π
function loadSessions() {
  onValue(ref(db, 'sessions'), (snapshot) => {
    sessionsList.innerHTML = '';
    sessionsData = [];
    
    if (!snapshot.exists()) {
      sessionsList.innerHTML = `
        <div class="empty-state">
          <i class="fas fa-history"></i>
          <p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ —Å–µ—Å—Å–∏—è—Ö</p>
        </div>
      `;
      return;
    }
    
    snapshot.forEach(sessionSnap => {
      sessionsData.push({ id: sessionSnap.key, ...sessionSnap.val() });
    });
    
    // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É)
    sessionsData.sort((a, b) => b.timestamp - a.timestamp);
    
    renderSessions();
  });
}

// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–µ—Å—Å–∏–π
function filterSessions() {
  const now = Date.now();
  let filteredSessions = sessionsData;
  
  switch (currentFilter) {
    case 'today':
      const today = new Date();
      today.setHours(0, 0, 0, 0);
      filteredSessions = sessionsData.filter(s => new Date(s.timestamp) >= today);
      break;
    case 'week':
      const weekAgo = new Date(now - 7 * 24 * 60 * 60 * 1000);
      filteredSessions = sessionsData.filter(s => new Date(s.timestamp) >= weekAgo);
      break;
  }
  
  return filteredSessions;
}

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π
function renderSessions() {
  sessionsList.innerHTML = '';
  const filteredSessions = filterSessions();
  
  if (filteredSessions.length === 0) {
    sessionsList.innerHTML = `
      <div class="empty-state">
        <i class="fas fa-history"></i>
        <p>–ù–µ—Ç —Å–µ—Å—Å–∏–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>
      </div>
    `;
    return;
  }
  
  filteredSessions.forEach(session => {
    const sessionItem = document.createElement('div');
    sessionItem.className = 'admin-item';
    
    const sessionDate = new Date(session.timestamp);
    const userAgent = session.userAgent || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
    const ip = session.ip || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
    const location = session.country ? 
      `${session.country}${session.city ? ', ' + session.city : session.region ? ', ' + session.region : ''}` : 
      '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
    
    sessionItem.innerHTML = `
      <div class="admin-item-info">
        <div><strong>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</strong> ${session.nickname || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'} (ID: ${session.userId || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'})</div>
        <div><strong>–í—Ä–µ–º—è –≤—Ö–æ–¥–∞:</strong> ${sessionDate.toLocaleString()}</div>
        <div><strong>–¢–∏–ø –≤—Ö–æ–¥–∞:</strong> <span class="session-badge">${session.loginType || '–ø–æ–≤—Ç–æ—Ä–Ω—ã–π'}</span></div>
        
        <div class="session-details">
          <div class="session-section">
            <h4>üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</h4>
            <div><strong>IP:</strong> ${ip}</div>
            <div><strong>–°—Ç—Ä–∞–Ω–∞:</strong> ${session.country || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'} ${session.countryCode ? `(${session.countryCode})` : ''}</div>
            <div><strong>–ì–æ—Ä–æ–¥:</strong> ${session.city || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</div>
            <div><strong>–†–µ–≥–∏–æ–Ω:</strong> ${session.region || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</div>
            <div><strong>–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:</strong> ${session.lat && session.lon ? `${session.lat}, ${session.lon}` : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</div>
            <div><strong>–ü—Ä–æ–≤–∞–π–¥–µ—Ä:</strong> ${session.isp || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</div>
            <div><strong>–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è:</strong> ${session.org || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</div>
          </div>
          
          <div class="session-section">
            <h4>üíª –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ –±—Ä–∞—É–∑–µ—Ä</h4>
            <div><strong>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:</strong> ${session.platform || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</div>
            <div><strong>–≠–∫—Ä–∞–Ω:</strong> ${session.screen || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</div>
            <div><strong>–Ø–∑—ã–∫:</strong> ${session.language || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</div>
            <div><strong>–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å:</strong> ${session.timezone || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</div>
            <div><strong>–ü–∞–º—è—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:</strong> ${session.deviceMemory || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'} GB</div>
            <div><strong>–Ø–¥–µ—Ä CPU:</strong> ${session.hardwareConcurrency || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</div>
            <div><strong>–¢–æ—á–µ–∫ –∫–∞—Å–∞–Ω–∏—è:</strong> ${session.maxTouchPoints || 0}</div>
          </div>
          
          <div class="session-section">
            <h4>üåê –°–µ—Ç—å –∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ</h4>
            <div><strong>–û–Ω–ª–∞–π–Ω:</strong> ${session.online ? '–î–∞' : '–ù–µ—Ç'}</div>
            <div><strong>Cookies:</strong> ${session.cookiesEnabled ? '–í–∫–ª—é—á–µ–Ω—ã' : '–û—Ç–∫–ª—é—á–µ–Ω—ã'}</div>
            <div><strong>Java:</strong> ${session.javaEnabled ? '–í–∫–ª—é—á–µ–Ω–∞' : '–û—Ç–∫–ª—é—á–µ–Ω–∞'}</div>
          </div>
          
          <div class="session-section">
            <h4>üîç User Agent</h4>
            <div style="word-break: break-all; font-size: 11px;">${userAgent}</div>
          </div>
        </div>
      </div>
      <div class="admin-item-actions">
        <button class="delete-btn" data-id="${session.id}">
          <i class="fas fa-trash"></i> –£–¥–∞–ª–∏—Ç—å
        </button>
      </div>
    `;
    
    sessionItem.querySelector('.delete-btn').addEventListener('click', (e) => {
      e.stopPropagation();
      if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É —Å–µ—Å—Å–∏—é?')) {
        remove(ref(db, 'sessions/' + session.id));
      }
    });
    
    sessionsList.appendChild(sessionItem);
  });
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
filterBtns.forEach(btn => {
  btn.addEventListener('click', () => {
    filterBtns.forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    currentFilter = btn.dataset.filter;
    renderSessions();
  });
});

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
addAdminBtn.addEventListener('click', () => {
  const nickname = adminNickname.value.trim();
  
  if (!nickname) {
    alert('–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫–Ω–µ–π–º');
    return;
  }
  
  if (!currentHash) {
    alert('–°–Ω–∞—á–∞–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ ID!');
    return;
  }
  
  const adminData = {
    nickname: nickname,
    adminId: currentHash,
    createdAt: Date.now()
  };
  
  push(ref(db, 'admins'), adminData);
  
  adminNickname.value = '';
  seedInput.value = '';
  hashOutput.textContent = '–•–µ—à –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∑–¥–µ—Å—å';
  currentHash = '';
  
  alert('–£—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ!');
});

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
loadAdmins();
loadSessions();
</script>
</body>
</html>